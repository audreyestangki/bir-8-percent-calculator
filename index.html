<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Freelipino â€“ 8% Tax Calculator for Filipino Freelancers</title>
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700&display=swap" rel="stylesheet" />
  <style>
    /* â”€â”€â”€ Reset â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    /* â”€â”€â”€ Design Tokens â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    :root {
      --navy:     #304258;
      --pink:     #f3608c;
      --gray-bg:  #f6f6f6;
      --green-bg: #e6ffdd;
      --border:   #97a2af;
      --muted:    #586472;
      --white:    #ffffff;
    }

    /* â”€â”€â”€ Base â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    body {
      font-family: 'Nunito', sans-serif;
      background: var(--white);
      color: var(--navy);
      min-height: 100vh;
    }

    /* â”€â”€â”€ Header â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .page-header {
      padding: 100px 100px 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 19px;
      text-align: center;
    }

    .page-header h1 {
      font-size: 48px;
      font-weight: 400;
      color: var(--navy);
      line-height: 1.2;
    }

    .page-header p {
      font-size: 18px;
      font-weight: 400;
      color: var(--navy);
      max-width: 790px;
      line-height: 1.6;
    }

    /* â”€â”€â”€ Main Layout â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .main {
      display: flex;
      flex-direction: row;
      justify-content: space-between;
      align-items: stretch;
      padding: 40px 100px 80px;
      gap: 40px;
    }

    /* â”€â”€â”€ Input Panel (Left) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    #input-panel {
      flex: 1;
      background: var(--gray-bg);
      border-radius: 8px;
      padding: 40px;
      display: flex;
      flex-direction: column;
      gap: 20px;
    }

    .input-panel-intro {
      font-size: 14px;
      font-weight: 400;
      color: var(--navy);
      line-height: 1.5;
    }

    /* Two-column month grid */
    #monthly-grid {
      display: flex;
      flex-direction: row;
      gap: 100px;
    }

    .month-col {
      display: flex;
      flex-direction: column;
      gap: 20px;
    }

    .month-row {
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    .month-label {
      font-size: 14px;
      font-weight: 600;
      color: var(--navy);
    }

    /* â‚± + number input box */
    .input-wrapper {
      background: var(--white);
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 10px 16px;
      width: 180px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
      transition: border-color 0.18s, box-shadow 0.18s;
    }

    .input-wrapper:focus-within {
      border-color: var(--pink);
      box-shadow: 0 0 0 3px rgba(243, 96, 140, 0.12);
    }

    .peso-sym {
      font-size: 15px;
      font-weight: 400;
      color: var(--muted);
      user-select: none;
      flex-shrink: 0;
    }

    .input-wrapper input[type="number"] {
      border: none;
      outline: none;
      background: transparent;
      font-family: 'Nunito', sans-serif;
      font-size: 15px;
      font-weight: 400;
      color: var(--navy);
      width: 100%;
      text-align: right;
      -moz-appearance: textfield;
    }

    .input-wrapper input[type="number"]::-webkit-outer-spin-button,
    .input-wrapper input[type="number"]::-webkit-inner-spin-button {
      -webkit-appearance: none;
    }

    /* Action buttons */
    .actions {
      display: flex;
      flex-direction: column;
      gap: 8px;
      margin-top: 4px;
    }

    .btn-compute {
      background: var(--pink);
      border: 1px solid var(--pink);
      border-radius: 8px;
      padding: 16px 24px;
      width: 100%;
      font-family: 'Nunito', sans-serif;
      font-size: 18px;
      font-weight: 600;
      color: var(--white);
      cursor: pointer;
      transition: opacity 0.18s, transform 0.12s;
    }

    .btn-compute:hover  { opacity: 0.9; transform: translateY(-1px); }
    .btn-compute:active { opacity: 0.8; transform: translateY(0); }

    .btn-reset {
      background: transparent;
      border: none;
      width: 100%;
      font-family: 'Nunito', sans-serif;
      font-size: 18px;
      font-weight: 600;
      color: var(--pink);
      cursor: pointer;
      padding: 10px;
      transition: opacity 0.18s;
    }

    .btn-reset:hover { opacity: 0.7; }

    /* â”€â”€â”€ Result Panel (Right) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    #result-panel {
      width: 618px;
      flex-shrink: 0;
      display: flex;
      flex-direction: column;
      gap: 24px;
    }

    #result-card {
      flex: 1;
      display: flex;
      flex-direction: column;
    }

    /* â”€â”€â”€ State: Initial â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .panel-initial {
      flex: 1;
      background: var(--gray-bg);
      border-radius: 8px;
      min-height: 360px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      padding: 48px 48px;
      gap: 16px;
    }

    .panel-initial h2 {
      font-size: 18px;
      font-weight: 700;
      color: var(--navy);
    }

    .panel-initial p {
      font-size: 14px;
      font-weight: 400;
      color: var(--navy);
      line-height: 1.7;
    }

    /* â”€â”€â”€ State: Error â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .panel-error {
      flex: 1;
      background: var(--gray-bg);
      border-radius: 8px;
      min-height: 360px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      padding: 48px 48px;
      gap: 16px;
    }

    .panel-error h2 {
      font-size: 18px;
      font-weight: 700;
      color: var(--navy);
    }

    .panel-error p {
      font-size: 14px;
      font-weight: 400;
      color: var(--navy);
      line-height: 1.7;
    }

    /* â”€â”€â”€ State: Not Eligible â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .panel-not-eligible {
      flex: 1;
      background: var(--green-bg);
      border-radius: 8px;
      min-height: 360px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      padding: 48px 48px;
      gap: 16px;
    }

    .panel-not-eligible .party-emoji {
      font-size: 40px;
      line-height: 1;
    }

    .panel-not-eligible h2 {
      font-size: 18px;
      font-weight: 700;
      color: var(--navy);
    }

    .panel-not-eligible .income-line {
      font-size: 14px;
      font-weight: 400;
      color: var(--navy);
    }

    .panel-not-eligible hr {
      width: 80%;
      border: none;
      border-top: 1px solid rgba(48, 66, 88, 0.18);
    }

    .panel-not-eligible .explanation {
      font-size: 14px;
      font-weight: 400;
      color: var(--navy);
      line-height: 1.7;
      max-width: 460px;
    }

    .panel-not-eligible .consult-bold {
      font-size: 14px;
      font-weight: 700;
      color: var(--navy);
      line-height: 1.7;
      max-width: 460px;
    }

    /* â”€â”€â”€ State: Eligible â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .panel-eligible {
      display: flex;
      flex-direction: column;
      gap: 40px;
    }

    /* Green banner */
    .eligible-banner {
      background: var(--green-bg);
      border-radius: 8px;
      padding: 16px 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 8px;
      text-align: center;
    }

    .banner-title {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .banner-title span {
      font-size: 18px;
      font-weight: 700;
      color: var(--navy);
    }

    .banner-income {
      font-size: 14px;
      font-weight: 400;
      color: var(--navy);
    }

    /* Tabs section */
    .tabs-section {
      display: flex;
      flex-direction: column;
      gap: 20px;
    }

    .tabs {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
    }

    .tab-btn {
      padding: 12px 24px;
      border-radius: 100px;
      border: none;
      font-family: 'Nunito', sans-serif;
      font-size: 18px;
      font-weight: 700;
      cursor: pointer;
      transition: background 0.18s, color 0.18s;
      white-space: nowrap;
    }

    .tab-btn.active {
      background: var(--pink);
      color: var(--white);
    }

    .tab-btn.inactive {
      background: transparent;
      color: var(--navy);
    }

    .tab-btn.inactive:hover {
      background: rgba(48, 66, 88, 0.06);
    }

    /* Quarterly rows */
    .quarterly-rows {
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    .quarter-row {
      background: var(--gray-bg);
      min-height: 70px;
      border-radius: 4px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 8px 16px;
    }

    .q-left {
      width: 240px;
      flex-shrink: 0;
    }

    .q-title {
      font-size: 18px;
      font-weight: 400;
      color: var(--navy);
      line-height: 1.3;
    }

    .q-title strong { font-weight: 700; }

    .q-deadline {
      font-size: 12px;
      font-weight: 400;
      color: var(--navy);
      margin-top: 2px;
    }

    .q-mid {
      width: 150px;
      flex-shrink: 0;
      text-align: right;
    }

    .q-right {
      width: 150px;
      flex-shrink: 0;
      text-align: right;
    }

    .q-amount {
      font-size: 18px;
      font-weight: 400;
      color: var(--navy);
    }

    .q-right .q-amount { font-weight: 700; }

    .q-sublabel {
      font-size: 12px;
      font-weight: 400;
      color: var(--muted);
    }

    /* Annual rows */
    .annual-rows {
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    .annual-row {
      background: var(--gray-bg);
      min-height: 70px;
      border-radius: 4px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 12px 16px;
    }

    .a-label {
      font-size: 18px;
      font-weight: 400;
      color: var(--navy);
    }

    .a-value {
      font-size: 18px;
      font-weight: 400;
      color: var(--navy);
      text-align: right;
    }

    .annual-row.total-row .a-label,
    .annual-row.total-row .a-value {
      font-weight: 700;
    }

    .annual-deadline {
      font-size: 12px;
      font-weight: 400;
      color: var(--muted);
      text-align: right;
    }

    /* â”€â”€â”€ Disclaimer â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .disclaimer {
      font-size: 14px;
      font-weight: 400;
      color: var(--muted);
      line-height: 1.7;
    }

    /* â”€â”€â”€ SVG icon helpers â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .icon-40 { width: 40px; height: 40px; flex-shrink: 0; }
    .icon-20 { width: 20px; height: 20px; flex-shrink: 0; }

    /* â”€â”€â”€ Responsive â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

    /* Prevent horizontal scrollbar at any width */
    body { overflow-x: hidden; }

    /* Flex children: allow shrinking below their content width */
    #input-panel, #result-panel { min-width: 0; }

    @media (max-width: 1380px) {
      .page-header { padding: 60px 60px 0; }
      .main { padding: 40px 60px 60px; gap: 32px; }
      #result-panel { width: 540px; }
      #monthly-grid { gap: 60px; }
    }

    @media (max-width: 1200px) {
      .page-header { padding: 48px 40px 0; }
      .main { padding: 40px 40px 60px; gap: 24px; }
      #result-panel { width: 460px; }
      #monthly-grid { gap: 40px; }
      /* Shrink quarterly columns to fit narrower right panel */
      .q-left  { width: 190px; }
      .q-mid, .q-right { width: 120px; }
      .q-title, .q-amount { font-size: 15px; }
      /* Tabs: smaller text so both pills fit on one row */
      .tab-btn { font-size: 14px; padding: 10px 16px; }
    }

    @media (max-width: 960px) {
      .page-header { padding: 40px 28px 0; }
      .page-header h1 { font-size: 36px; }
      .page-header p  { font-size: 16px; }
      .main {
        flex-direction: column;
        padding: 28px 28px 48px;
        gap: 24px;
      }
      #result-panel { width: 100%; }
      #monthly-grid { gap: 32px; }
      /* Restore quarterly column widths for full-width panel */
      .q-left  { width: 240px; }
      .q-mid, .q-right { width: 150px; }
      .q-title, .q-amount { font-size: 18px; }
      .tab-btn { font-size: 15px; padding: 10px 18px; }
    }

    @media (max-width: 640px) {
      .page-header { padding: 32px 20px 0; }
      .page-header h1 { font-size: 26px; }
      .main { padding: 20px 20px 40px; }
      #input-panel { padding: 28px 20px; }
      #monthly-grid { flex-direction: column; gap: 0; }
      .month-col { gap: 14px; }
      .month-col + .month-col { margin-top: 14px; }
      .input-wrapper { width: 100%; max-width: 260px; }
      .q-left  { width: 170px; }
      .q-mid, .q-right { width: 100px; }
      .q-title, .q-amount, .a-label, .a-value { font-size: 14px; }
      .tab-btn { font-size: 14px; padding: 9px 14px; }
      .quarter-row { height: auto; min-height: 60px; }
    }
  </style>
</head>
<body>

  <!-- â”€â”€ Header â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <header class="page-header">
    <h1>calculate your tax with Freelipino</h1>
    <p>for self-employed individuals and professionals under the 8% income tax option (BIR TRAIN Law). input your monthly earnings and we'll handle the math.</p>
  </header>

  <!-- â”€â”€ Main â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <main class="main">

    <!-- LEFT: Input Panel -->
    <div id="input-panel">
      <p class="input-panel-intro">Input your monthly income in the boxes below:</p>

      <div id="monthly-grid">

        <!-- Column 1: January â€“ June -->
        <div class="month-col">
          <div class="month-row">
            <span class="month-label">January</span>
            <div class="input-wrapper">
              <span class="peso-sym">â‚±</span>
              <input type="number" id="m0" min="0" step="1" oninput="onInputChange()" />
            </div>
          </div>
          <div class="month-row">
            <span class="month-label">February</span>
            <div class="input-wrapper">
              <span class="peso-sym">â‚±</span>
              <input type="number" id="m1" min="0" step="1" oninput="onInputChange()" />
            </div>
          </div>
          <div class="month-row">
            <span class="month-label">March</span>
            <div class="input-wrapper">
              <span class="peso-sym">â‚±</span>
              <input type="number" id="m2" min="0" step="1" oninput="onInputChange()" />
            </div>
          </div>
          <div class="month-row">
            <span class="month-label">April</span>
            <div class="input-wrapper">
              <span class="peso-sym">â‚±</span>
              <input type="number" id="m3" min="0" step="1" oninput="onInputChange()" />
            </div>
          </div>
          <div class="month-row">
            <span class="month-label">May</span>
            <div class="input-wrapper">
              <span class="peso-sym">â‚±</span>
              <input type="number" id="m4" min="0" step="1" oninput="onInputChange()" />
            </div>
          </div>
          <div class="month-row">
            <span class="month-label">June</span>
            <div class="input-wrapper">
              <span class="peso-sym">â‚±</span>
              <input type="number" id="m5" min="0" step="1" oninput="onInputChange()" />
            </div>
          </div>
        </div>

        <!-- Column 2: July â€“ December -->
        <div class="month-col">
          <div class="month-row">
            <span class="month-label">July</span>
            <div class="input-wrapper">
              <span class="peso-sym">â‚±</span>
              <input type="number" id="m6" min="0" step="1" oninput="onInputChange()" />
            </div>
          </div>
          <div class="month-row">
            <span class="month-label">August</span>
            <div class="input-wrapper">
              <span class="peso-sym">â‚±</span>
              <input type="number" id="m7" min="0" step="1" oninput="onInputChange()" />
            </div>
          </div>
          <div class="month-row">
            <span class="month-label">September</span>
            <div class="input-wrapper">
              <span class="peso-sym">â‚±</span>
              <input type="number" id="m8" min="0" step="1" oninput="onInputChange()" />
            </div>
          </div>
          <div class="month-row">
            <span class="month-label">October</span>
            <div class="input-wrapper">
              <span class="peso-sym">â‚±</span>
              <input type="number" id="m9" min="0" step="1" oninput="onInputChange()" />
            </div>
          </div>
          <div class="month-row">
            <span class="month-label">November</span>
            <div class="input-wrapper">
              <span class="peso-sym">â‚±</span>
              <input type="number" id="m10" min="0" step="1" oninput="onInputChange()" />
            </div>
          </div>
          <div class="month-row">
            <span class="month-label">December</span>
            <div class="input-wrapper">
              <span class="peso-sym">â‚±</span>
              <input type="number" id="m11" min="0" step="1" oninput="onInputChange()" />
            </div>
          </div>
        </div>

      </div><!-- /#monthly-grid -->

      <div class="actions">
        <button class="btn-compute" onclick="compute()">compute taxes</button>
        <button class="btn-reset"   onclick="resetForm()">reset</button>
      </div>
    </div><!-- /#input-panel -->

    <!-- RIGHT: Result Panel -->
    <div id="result-panel">
      <div id="result-card">
        <!-- Dynamically rendered by JS -->
      </div>
      <p class="disclaimer">
        Disclaimer: This calculator is for estimation purposes only based on BIR computation methodology
        and does not replace professional tax advice. This tool is intended for
        <strong>non-VAT registered, purely self-employed individuals only</strong>.
        It is <strong>not applicable to mixed income earners</strong> (those with both compensation
        income and self-employment income). Consult a licensed tax professional or CPA for advice
        specific to your situation.
      </p>
    </div><!-- /#result-panel -->

  </main>

  <!-- â”€â”€ Script â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <script>
    // â”€â”€â”€ Constants â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    const MONTHS = [
      'January','February','March','April',
      'May','June','July','August',
      'September','October','November','December',
    ];

    const QUARTERS = [
      { label: 'Q1', months: [0, 1, 2],   period: 'Janâ€“Mar', deadlineStatic: 'May 15'       },
      { label: 'Q2', months: [3, 4, 5],   period: 'Aprâ€“Jun', deadlineStatic: 'August 15'    },
      { label: 'Q3', months: [6, 7, 8],   period: 'Julâ€“Sep', deadlineStatic: 'November 15'  },
      { label: 'Q4', months: [9, 10, 11], period: 'Octâ€“Dec', deadlineStatic: null            },
    ];

    const DEDUCTION      = 250000;
    const TAX_RATE       = 0.08;
    const INCOME_CEILING = 3000000;

    // â”€â”€â”€ UI State â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    let activeTab        = 'quarterly';
    let lastComputedData = null;

    // â”€â”€â”€ Helpers â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function round2(n) {
      return parseFloat(n.toFixed(2));
    }

    function peso(amount) {
      return 'â‚± ' + amount.toLocaleString('en-PH', {
        minimumFractionDigits: 2,
        maximumFractionDigits: 2,
      });
    }

    // â”€â”€â”€ Input Change â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function onInputChange() {
      // Reset right panel back to initial whenever user edits after a computation
      if (lastComputedData !== null) {
        lastComputedData = null;
        activeTab = 'quarterly';
        renderInitialPanel();
      }
    }

    // â”€â”€â”€ Reset â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function resetForm() {
      MONTHS.forEach((_, i) => {
        const el = document.getElementById('m' + i);
        if (el) el.value = '';
      });
      lastComputedData = null;
      activeTab = 'quarterly';
      renderInitialPanel();
    }

    // â”€â”€â”€ Validation â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function validate() {
      let valid = true;
      MONTHS.forEach((_, i) => {
        const raw    = document.getElementById('m' + i).value.trim();
        const numVal = Number(raw);
        if (raw === '' || raw.includes('.') || !Number.isInteger(numVal) || numVal < 0) {
          valid = false;
        }
      });
      return valid;
    }

    // â”€â”€â”€ Core Computation â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function compute() {
      if (!validate()) {
        renderErrorPanel();
        return;
      }

      // Collect monthly values (whole pesos)
      const monthly = MONTHS.map((_, i) => parseInt(document.getElementById('m' + i).value, 10));

      // Annual gross
      const annualGross = monthly.reduce((a, b) => a + b, 0);

      // Eligibility check: above ceiling â†’ not eligible for 8%
      if (annualGross > INCOME_CEILING) {
        renderNotEligiblePanel(annualGross);
        return;
      }

      // Annual computation
      const annualTaxable = Math.max(0, annualGross - DEDUCTION);
      const annualTaxDue  = round2(annualTaxable * TAX_RATE);

      // Cumulative quarterly computation
      let prevCumulativeTax = 0;
      const quarterData = QUARTERS.map(q => {
        const lastMonthIndex  = q.months[q.months.length - 1];
        const quarterlyGross  = q.months.reduce((sum, m) => sum + monthly[m], 0);
        const cumulativeGross = monthly.slice(0, lastMonthIndex + 1).reduce((a, b) => a + b, 0);
        const cumulativeTax   = round2(Math.max(0, cumulativeGross - DEDUCTION) * TAX_RATE);
        const taxPayable      = round2(cumulativeTax - prevCumulativeTax);
        prevCumulativeTax = cumulativeTax;
        return {
          label: q.label,
          period: q.period,
          quarterlyGross,
          cumulativeGross,
          taxPayable,
          deadlineStatic: q.deadlineStatic,
        };
      });

      // Q4 reconciliation: annual figure is authoritative; absorbs any rounding drift
      const sumQ1toQ3 = quarterData.slice(0, 3).reduce((s, q) => s + q.taxPayable, 0);
      quarterData[3].taxPayable = round2(annualTaxDue - sumQ1toQ3);

      lastComputedData = { annualGross, annualTaxable, annualTaxDue, quarterData };
      renderEligiblePanel(lastComputedData);
    }

    // â”€â”€â”€ Panel Renderer Utilities â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function setResultCard(html) {
      document.getElementById('result-card').innerHTML = html;
    }

    // â”€â”€â”€ State 1: Initial â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function renderInitialPanel() {
      setResultCard(`
        <div class="panel-initial">
          <svg class="icon-40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
            <circle cx="20" cy="20" r="19" stroke="#5bb553" stroke-width="2"/>
            <path d="M12 21L17.5 26.5L28 15" stroke="#5bb553" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          <h2>Go ahead. Input your earnings.</h2>
          <p>your information stays private<br>just enter what you earn and we'll handle the rest</p>
        </div>
      `);
    }

    // â”€â”€â”€ State 4: Error â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function renderErrorPanel() {
      setResultCard(`
        <div class="panel-error">
          <svg class="icon-40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
            <circle cx="20" cy="20" r="19" stroke="#304258" stroke-width="2"/>
            <text x="20" y="27" text-anchor="middle"
              font-family="Nunito, sans-serif" font-size="20" font-weight="700" fill="#304258">?</text>
          </svg>
          <h2>Something went wrong</h2>
          <p>ooops! we ran into an unexpected issue while processing this<br>please try again</p>
        </div>
      `);
    }

    // â”€â”€â”€ State 3: Not Eligible â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function renderNotEligiblePanel(annualGross) {
      setResultCard(`
        <div class="panel-not-eligible">
          <span class="party-emoji" aria-label="Celebration">ðŸŽ‰</span>
          <h2>Nice work! You're above the 8% income threshold!</h2>
          <p class="income-line">Total income: <strong>${peso(annualGross)}</strong></p>
          <hr />
          <p class="explanation">
            Your total annual gross income of <strong>${peso(annualGross)}</strong> exceeds the
            <strong>â‚± 3,000,000</strong> ceiling for the 8% flat tax option. You may be subject
            to graduated income tax rates instead.
          </p>
          <p class="consult-bold">
            contact a professional tax adviser to ensure your results are accurate and compliant.
          </p>
        </div>
      `);
    }

    // â”€â”€â”€ State 2: Eligible (with tabs) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function renderEligiblePanel(data) {
      const bannerHtml = `
        <div class="eligible-banner">
          <div class="banner-title">
            <svg class="icon-20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
              <circle cx="10" cy="10" r="9" stroke="#5bb553" stroke-width="1.5"/>
              <path d="M6 10.5L8.5 13L14 7.5" stroke="#5bb553" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <span>You are eligible for the 8% tax rate!</span>
          </div>
          <p class="banner-income">Total income: <strong>${peso(data.annualGross)}</strong></p>
        </div>
      `;

      const tabsHtml = `
        <div class="tabs">
          <button
            class="tab-btn ${activeTab === 'quarterly' ? 'active' : 'inactive'}"
            onclick="switchTab('quarterly')"
          >quarterly tax summary</button>
          <button
            class="tab-btn ${activeTab === 'annual' ? 'active' : 'inactive'}"
            onclick="switchTab('annual')"
          >annual tax summary</button>
        </div>
      `;

      const contentHtml = activeTab === 'quarterly'
        ? renderQuarterlyContent(data.quarterData)
        : renderAnnualContent(data);

      setResultCard(`
        <div class="panel-eligible">
          ${bannerHtml}
          <div class="tabs-section">
            ${tabsHtml}
            ${contentHtml}
          </div>
        </div>
      `);
    }

    // â”€â”€â”€ Quarterly Content â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function renderQuarterlyContent(quarterData) {
      const annualDeadlineYear = new Date().getFullYear() + 1;

      const rows = quarterData.map((q, i) => {
        const deadline = i < 3
          ? `to be paid on or before ${q.deadlineStatic}`
          : `to be paid on or before April 15, ${annualDeadlineYear}`;
        return `
          <div class="quarter-row">
            <div class="q-left">
              <div class="q-title"><strong>${q.label}</strong> (${q.period})</div>
              <div class="q-deadline">${deadline}</div>
            </div>
            <div class="q-mid">
              <div class="q-amount">${peso(q.quarterlyGross)}</div>
              <div class="q-sublabel">income</div>
            </div>
            <div class="q-right">
              <div class="q-amount">${peso(q.taxPayable)}</div>
              <div class="q-sublabel">tax due</div>
            </div>
          </div>
        `;
      }).join('');

      return `<div class="quarterly-rows">${rows}</div>`;
    }

    // â”€â”€â”€ Annual Content â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function renderAnnualContent(data) {
      const annualDeadlineYear = new Date().getFullYear() + 1;
      const deductionApplies   = data.annualGross > DEDUCTION;

      const rowsHtml = deductionApplies ? `
        <div class="annual-row">
          <span class="a-label">annual income</span>
          <span class="a-value">${peso(data.annualGross)}</span>
        </div>
        <div class="annual-row">
          <span class="a-label">less: standard deduction</span>
          <span class="a-value">âˆ’ ${peso(DEDUCTION)}</span>
        </div>
        <div class="annual-row">
          <span class="a-label">taxable income</span>
          <span class="a-value">${peso(data.annualTaxable)}</span>
        </div>
        <div class="annual-row total-row">
          <span class="a-label">total tax due</span>
          <span class="a-value">${peso(data.annualTaxDue)}</span>
        </div>
      ` : `
        <div class="annual-row">
          <span class="a-label">annual income</span>
          <span class="a-value">${peso(data.annualGross)}</span>
        </div>
        <div class="annual-row total-row">
          <span class="a-label">total tax due</span>
          <span class="a-value">â‚± 0.00</span>
        </div>
      `;

      return `
        <div class="annual-rows">${rowsHtml}</div>
        <p class="annual-deadline">to be paid on or before April 15, ${annualDeadlineYear}</p>
      `;
    }

    // â”€â”€â”€ Tab Switcher â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function switchTab(tab) {
      activeTab = tab;
      if (lastComputedData) {
        renderEligiblePanel(lastComputedData);
      }
    }

    // â”€â”€â”€ Boot â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    renderInitialPanel();
  </script>

</body>
</html>
